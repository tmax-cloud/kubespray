---
- name: Bootstrap HyperCloud | Install Nginx-Ingress
  import_tasks: install-ingress.yml
  when: inventory_hostname == groups['kube_control_plane'][0]

- name: Bootstrap HyperCloud | Download Helm
  import_tasks: download-helm.yml
  when: inventory_hostname == groups['kube_control_plane'][0]

- name: Bootstrap HyperCloud | Install HyperRegistry
  import_tasks: install-hr.yml
  when: inventory_hostname == groups['kube_control_plane'][0]

- name: Bootstrap HyperCloud | Trust HyperRegistry CA
  import_tasks: trust-hr-ca.yml

- name: Bootstrap HyperCloud | Replicate Images from private
  import_tasks: upload-images.yml
  when: inventory_hostname == groups['kube_control_plane'][0]

- name: Bootstrap HyperCloud | Install Gitlab
  import_tasks: install-gitlab.yml
  when: inventory_hostname == groups['kube_control_plane'][0]

- name: Bootstrap HyperCloud | Install ArgoCD
  import_tasks: install-argocd-helm.yml
  when: inventory_hostname == groups['kube_control_plane'][0]

#- name: Bootstrap HyperCloud | Upgrade HyperRegistry
#  import_tasks: upgrade-hr.yml
